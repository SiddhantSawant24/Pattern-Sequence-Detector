module mealey(clk_i,clr_i,input,valid_i,output_o);
parameter S_R=0001;
parameter S_B=0010;
parameter S_BC=0100;
parameter S_BCB=1000;

input clk_i,clr_i,input,valid_i;
output reg output;

reg[3:0] present_state;
reg[3:0] next_state;


always @(posedge clk_i)begin
	if(clr_i)begin
		output=0;
		present_state=0;
		next_state=0;
	end

	else begin
		if(valid_i)begin
			case (present_state)
				S_R:begin
					if (input)begin
						output=0;
						next_state=S_B;
					end

					else begin
						output=0;
						next_state=S_R;
					end
				end

				S_B:begin
					if (input)begin
						output=0;
						next_state=S_B;
					end

					else begin
						output=0;
						next_state=S_BC;
					end
				end

				S_BC:begin
					if (input)begin
						output=0;
						next_state=S_BCB;
					end

					else begin
						output=0;
						next_state=S_R;
					end
				end

				S_BCB:begin
					if (input)begin
						output=1;
						next_state=S_R;
					end

					else begin
						output=0;
						next_state=S_R;
					end
				end
			endcase
		end
	end
end

always @(next_state)begin
	present_state=next_state;
end
endmodule


		


